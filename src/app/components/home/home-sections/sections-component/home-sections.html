<div class="relative h-full">
  <p-toast />
  <!-- <img
    src="{{ image }}"
    alt="Fondo"
    class="absolute inset-0 -z-10 opacity-5 w-full h-full object-cover"
  /> -->
  <div
    class="relative w-full h-full bg-gradient-to-br from-yellow-300 bg-red-800"
  ></div>
  <div class="md:px-8 z-20">
    <div
      class="mb-10 flex flex-col sm:flex-col lg:flex-row flex-wrap md:flex-row xl:gap-28 md:gap-2 sm:gap-2 z-20 justify-around sm:items-start items-start md:items-center lg:items-center w-full"
    >
      <div
        class="flex sm:scale-100 md:scale-100 lg:scale-75 scale-75 ml-0 gap-1"
      >
        <div id="container" class="">
          <div
            id="flip"
            class="justify-center scale-50 sm:scale-50 md:scale-75 lg:scale-125 text-center"
          >
            <div>
              <div
                class="bg-gradient-to-tl from-green-500 via-green-500 to-green-500"
              >
                wOrK
              </div>
            </div>
            <div>
              <div
                class="bg-gradient-to-tl from-cyan-400 via-cyan-300 to-cyan-400"
              >
                lifeStyle
              </div>
            </div>
            <div>
              <div
                class="bg-gradient-to-tl from-red-600 via-red-500 to-red-700"
              >
                Everything
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- component of search -->
      <section-search-input
        (Element)="changetext($event)"
        [productsEnviados]="productsfind()"
        (changefind)="changefind($event)"
      />
      <!-- session navbar user -->
      <div
        class="absolute md:relative ml-52 mb-8 sm:ml-52 md:m-0 lg:m-0 sm:mb-14"
      >
        <app-session />
      </div>
    </div>
    <!-- Results of search input -->
    <section-search-results
      [letersend]="searchElement"
      [searchProduct]="valorfind"
    />
    <p class="my-3 text-2xl uppercase font-bold text-slate-700">
      Favorite product
    </p>
    <!-- This is component of Favorite products -->
    @if (!favoriteProductLoading) { @if( favoriteProduct.length == 0 ){
    <app-sections-isvaluezero title="favorite products" />
    } @else {
    <div class="w-full max-w-[95rem] mx-auto pt-6">
      <!-- Contenedor con scroll horizontal -->
      <div class="flex overflow-x-auto px-4 space-x-10 pb-2 scroll-container">
        @for (item of favoriteProduct; track $index) {
        <div class="flex-shrink-0 pb-5 w-[35rem] max-w-[90vw]">
          <div
            class="group bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-green-200 flex h-full"
          >
            <!-- Contenedor rectangular 40% imagen / 60% contenido -->
            <div class="flex flex-row w-full h-[20rem]">
              <!-- Imagen - 40% -->
              <div
                class="w-2/5 relative overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100"
              >
                <img
                  [src]="url + '/' + item.urlImg"
                  alt="{{ item.title }}"
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                />
                <!-- Bot贸n favorito -->
                <button
                  (click)="addtofavorite(item.status, item.id_product, favoriteProduct)"
                  class="absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:scale-110 transition-transform duration-200"
                  [class.text-red-500]="item.status"
                  [class.text-gray-400]="!item.status"
                >
                  <i class="pi {{ item.icon }} text-sm"></i>
                </button>
              </div>

              <!-- Contenido - 60% -->
              <div class="w-3/5 flex flex-col justify-between p-6">
                <!-- Informaci贸n principal -->
                <div>
                  <h3
                    class="font-semibold text-gray-800 text-xl mb-3 line-clamp-2 leading-tight"
                  >
                    {{ item.title }}
                  </h3>
                  <p
                    class="text-gray-600 text-sm mb-4 line-clamp-3 leading-relaxed"
                  >
                    {{ item.description }}
                  </p>
                </div>

                <!-- Informaci贸n secundaria -->
                <div class="mb-4">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-green-600 font-bold text-xl">
                      {{ item.price | currency }}
                    </span>
                    <span
                      class="text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full"
                    >
                      {{ item.quantity_user }} disponibles
                    </span>
                  </div>
                </div>

                <!-- Botones de acci贸n -->
                <div class="flex space-x-3">
                  <button
                    (click)="addbuy(item.id, item.title, item.price, item.quantity_user, item.urlImg, item.tipo)"
                    class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg flex items-center justify-center transition-colors duration-200 text-sm font-medium"
                  >
                    <i class="pi pi-shopping-cart mr-2"></i>
                    <span>Bay</span>
                  </button>

                  <button
                    [routerLink]="['/products', item.id_product]"
                    class="w-12 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg flex items-center justify-center transition-colors duration-200 border border-gray-200"
                  >
                    <i class="pi pi-eye"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
    } } @else {
    <div
      class="flex flex-nowrap md:w-full lg:w-full sm:flex-row md:flex-row lg:flex-row overflow-x-auto gap-9"
    >
      @for (item of [0,1,2]; track $index){
      <!-- Loading page -->
      <div class="max-w-[580px] animate">
        <div
          class="card mb-3 bg-gradient-to-bl bg-slate-500 from-slate-200 w-[560px]"
        >
          <div class="row g-0">
            <div class="col-md-5">
              <span
                class="h-full bg-gradient-to-r flex justify-center items-center from-transparent opacity-85 rounded-start"
                ><div class="loader"></div
              ></span>
            </div>
            <div class="col-md-7">
              <div class="card-body">
                <p-skeleton width="7rem" height="1.5rem" styleClass="mb-4 " />
                <p-skeleton width="12rem" styleClass="mb-2" />
                <p-skeleton width="11rem" styleClass="mb-2" />
                <p-skeleton width="10rem" styleClass="mb-4" />
                <p-skeleton width="5rem" styleClass="mb-2" />
                <div class="w-full flex gap-1 justify-end">
                  <p-skeleton width="5rem" height="2rem" styleClass="mb-2" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      }
    </div>
    }

    <!-- this is component of New product -->
    <p class="my-3 text-2xl font-bold text-slate-700">New products</p>
    @if(!datosApiLoading){ @if(datosApi.length == 0){
    <app-sections-isvaluezero title="new products" />
    } @else {
    <p-carousel
      [value]="datosApi"
      [numVisible]="4"
      [numScroll]="4"
      [circular]="true"
      [responsiveOptions]="responsiveOptions"
      autoplayInterval="10000"
    >
      <ng-template let-product pTemplate="item">
        <div class="group flex justify-center">
          <div
            class="border-1 shadow-xl mb-5 w-72 h-96 bg-gradient-to-b from-white via-slate-50 to-slate-200 rounded-3xl surface-border border-round m-2 p-3"
          >
            <div class="mb-3">
              <div class="relative mx-auto">
                <img
                  [src]="url + '/' + product.image "
                  [alt]="product.name"
                  class="w-full h-full object-fit-cover min-h-[254px] aspect-square rounded-xl group-hover:scale-105 transition-transform duration-500"
                />
                <p-tag
                  [value]="product.inventoryStatus"
                  [severity]="getSeverity(product.inventoryStatus)"
                  class="absolute"
                  [ngStyle]="{ 'left.px': 5, 'top.px': 5 }"
                />
              </div>
            </div>
            <div class="mb-3 text-xl text-rose-800 font-bold">
              {{ product.name }}
            </div>
            <div class="flex justify-content-between align-items-center">
              <div
                class="mt-0 flex max-w-[50%] flex-1 gap-1 py-1 px-2 font-bold text-sm"
              >
                $ <span class="line-clamp-1">{{ product.price}}</span> cup
              </div>
              <span class="rounded shadow-lg shadow-gray-500 flex flex-1">
                <div
                  class="border-r-2 w-full bg-gradient-to-tr rounded-l-md from-gray-900 to-gray-800 py-1 h-full"
                >
                  <p-button
                    icon="pi {{ !product.icon ? product.icon : product.icon }}"
                    [ngClass]="{ 'text-red-600': product.status }"
                    (click)="addtofavorite(product.status, product.id_product,datosApi)"
                    class="hover:scale-110 text-white duration-300 hover:text-teal-500"
                    severity="secondary"
                    [outlined]="true"
                  />
                </div>
                <div
                  class="border-r-2 bg-gradient-to-tr from-gray-100 to-gray-200 w-full py-1 h-full"
                >
                  <p-button
                    icon="pi pi-shopping-cart"
                    (click)="
                    addbuy(
                      product.id_product,
                      product.name,
                      product.price,
                      product.quantity_user,
                      product.image,
                      product.tipo
                    )
                    "
                    class="hover:scale-110 duration-300 hover:text-blue-400"
                    styleClass=" "
                  />
                </div>
                <div
                  class="border-r-2 w-full bg-gradient-to-tr rounded-r-md from-green-400 to-green-600 py-1 h-full"
                >
                  <p-button
                    [routerLink]="['/products', product.id_product]"
                    icon="pi pi-plus"
                    class="hover:scale-110 duration-300 hover:text-white"
                  />
                </div>
              </span>
            </div>
          </div>
        </div>
      </ng-template>
    </p-carousel>
    } }@else{

    <div class="flex m-2 w-full px-20 justify-between items-center">
      @for(item of [1,2,3];track $index){
      <div
        class="w-[18rem] h-[24rem] rounded-2xl bg-gradient-to-b from-white via-slate-50 to-slate-200"
      >
        <div class="w-full relative flex justify-center pt-3">
          <div class="loader absolute left-auto top-1/3 z-10"></div>
          <p-skeleton height="15rem" width="16rem" styleClass="mb-4" />
        </div>
        <p-skeleton width="6rem" height="1.2rem" styleClass="mb-3 mx-3" />
        <div class="flex justify-between">
          <p-skeleton width="9rem" height="2rem" styleClass=" mx-3" />
          <p-skeleton width="5rem" height="2rem" styleClass="mx-3" />
        </div>
      </div>
      }
    </div>
    }

    <app-home-secondory />
  </div>
</div>
